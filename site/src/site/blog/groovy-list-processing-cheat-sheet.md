---
layout: post
title: Groovy List Processing Cheat Sheet
date: '2022-08-28T08:46:29+00:00'
permalink: groovy-list-processing-cheat-sheet
---
<h3>Declaring lists</h3>

<p>Several styles are supported for declaring lists:</p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;"><span style="color:#cc7832;">var </span>pets    = [<span style="color:#6a8759;">'cat'</span>, <span style="color:#6a8759;">'canary'</span>, <span style="color:#6a8759;">'dog'</span>, <span style="color:#6a8759;">'fish'</span>, <span style="color:#6a8759;">'gerbil'</span>]  <span style="color:#808080;">// idiomatic Groovy<br></span><span style="color:#cc7832;">var </span>nums    = [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>] <span style="color:#cc7832;">as </span>LinkedList                  <span style="color:#808080;">// use 'as' for other kinds of list<br></span><span style="color:#cc7832;">var </span>primes  = List.<span style="color:#9876aa;font-style:italic;">of</span>(<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">5</span>, <span style="color:#6897bb;">7</span>)                         <span style="color:#808080;">// Java 9+ style (immutable)<br></span><span style="color:#cc7832;">var </span>range   = <span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">4                                        </span><span style="color:#808080;">// a range is also a list (immutable)<br></span><span style="color:#cc7832;">var </span>bigNums = [<span style="color:#6897bb;">1000</span>, <span style="color:#6897bb;">2000</span>].asUnmodifiable()               <span style="color:#808080;">// unmodifiable (backed by original)<br></span><span style="color:#cc7832;">var </span>negNums = [-<span style="color:#6897bb;">100</span>, -<span style="color:#6897bb;">200</span>].asImmutable()                  <span style="color:#808080;">// immutable (backed by copy)</span></pre>

<h3>List elements and properties</h3>

<p>Java methods for accessing list elements and list properties:</p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;"><span style="color:#cc7832;">assert </span>!pets.isEmpty()<br><span style="color:#cc7832;">assert </span>pets.size() == <span style="color:#6897bb;">5<br></span><span style="color:#cc7832;">assert </span>pets.get(<span style="color:#6897bb;">0</span>) == <span style="color:#6a8759;">'cat'<br></span><span style="color:#cc7832;">assert </span>pets.contains(<span style="color:#6a8759;">'dog'</span>)<br><span style="color:#cc7832;">assert </span>pets.containsAll(<span style="color:#6a8759;">'cat'</span>, <span style="color:#6a8759;">'dog'</span>)<br>pets.forEach <span style="font-weight:bold;">{ </span><span style="color:#cc7832;">assert </span>it.size() &gt; <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">}<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6a8759;">'a'</span>, <span style="color:#6a8759;">'b'</span>, <span style="color:#6a8759;">'a'</span>].indexOf(<span style="color:#6a8759;">'a'</span>) == <span style="color:#6897bb;">0<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6a8759;">'a'</span>, <span style="color:#6a8759;">'b'</span>, <span style="color:#6a8759;">'a'</span>].lastIndexOf(<span style="color:#6a8759;">'a'</span>) == <span style="color:#6897bb;">2<br></span></pre><p>Groovy extensions for accessing list elements and list properties:</p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;"><span style="color:#cc7832;">assert </span>pets[<span style="color:#6897bb;">0</span>] == <span style="color:#6a8759;">'cat'<br></span><span style="color:#cc7832;">assert </span>pets?[<span style="color:#6897bb;">0</span>] == <span style="color:#6a8759;">'cat'  </span><span style="color:#808080;">// safe indexing returns null if pets was null instead of NPE<br></span><span style="color:#cc7832;">assert </span>pets.first() == <span style="color:#6a8759;">'cat'<br></span><span style="color:#cc7832;">assert </span>pets.head() == <span style="color:#6a8759;">'cat'<br></span><span style="color:#cc7832;">assert </span>pets[-<span style="color:#6897bb;">1</span>] == <span style="color:#6a8759;">'gerbil'<br></span><span style="color:#cc7832;">assert </span>pets[<span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">3</span>] == [<span style="color:#6a8759;">'canary'</span>, <span style="color:#6a8759;">'dog'</span>, <span style="color:#6a8759;">'fish'</span>]<br><span style="color:#cc7832;">assert </span>pets[<span style="color:#6897bb;">3</span>..<span style="color:#6897bb;">1</span>] == [<span style="color:#6a8759;">'fish'</span>, <span style="color:#6a8759;">'dog'</span>, <span style="color:#6a8759;">'canary'</span>]  <span style="color:#808080;">// reverse range<br></span><span style="color:#cc7832;">assert </span>pets[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">3</span>] == [<span style="color:#6a8759;">'canary'</span>, <span style="color:#6a8759;">'fish'</span>, <span style="color:#6a8759;">'fish'</span>]  <span style="color:#808080;">// arbitrary collection<br></span><span style="color:#cc7832;">assert </span>pets[<span style="color:#6897bb;">0</span>..<span style="color:#6897bb;">1</span>, [<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">3</span>]] == [<span style="color:#6a8759;">'cat'</span>, <span style="color:#6a8759;">'canary'</span>, <span style="color:#6a8759;">'fish'</span>, <span style="color:#6a8759;">'fish'</span>]  <span style="color:#808080;">// nested collections<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>].count(<span style="color:#6897bb;">1</span>) == <span style="color:#6897bb;">2<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].min() == <span style="color:#6897bb;">1<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].max() == <span style="color:#6897bb;">4<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].sum() == <span style="color:#6897bb;">10<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].average() == <span style="color:#6897bb;">2.5<br></span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].eachWithIndex<span style="font-weight:bold;">{ </span>val, idx <span style="font-weight:bold;">-&gt; </span><span style="color:#cc7832;">assert </span>val == idx + <span style="color:#6897bb;">1 </span><span style="font-weight:bold;">}<br></span><span style="color:#cc7832;">def </span>cpets = pets[<span style="color:#6897bb;">0</span>..<span style="color:#6897bb;">1</span>]<br><span style="color:#cc7832;">assert </span>cpets == [<span style="color:#6a8759;">'cat'</span>, <span style="color:#6a8759;">'canary'</span>]<br><span style="color:#cc7832;">assert </span>pets.findAll <span style="font-weight:bold;">{ </span>it =~ <span style="color:#6a8759;">/</span><span style="color:#6a8759;background-color:#364135;">c.*</span><span style="color:#6a8759;">/ </span><span style="font-weight:bold;">} </span>== cpets<br><span style="color:#cc7832;">assert </span>pets.find <span style="font-weight:bold;">{ </span>it =~ <span style="color:#6a8759;">/</span><span style="color:#6a8759;background-color:#364135;">c.*</span><span style="color:#6a8759;">/ </span><span style="font-weight:bold;">} </span>== cpets[<span style="color:#6897bb;">0</span>]<br><span style="color:#cc7832;">assert </span>pets.grep(~<span style="color:#6a8759;">/</span><span style="color:#6a8759;background-color:#364135;">c.*</span><span style="color:#6a8759;">/</span>) == cpets<br><span style="color:#cc7832;">assert </span>cpets.min <span style="font-weight:bold;">{ </span>it.size() <span style="font-weight:bold;">} </span>== <span style="color:#6a8759;">'cat'  </span><span style="color:#808080;">// cpet with smallest size name<br></span><span style="color:#cc7832;">assert </span>cpets.max <span style="font-weight:bold;">{ </span>it.size() <span style="font-weight:bold;">} </span>== <span style="color:#6a8759;">'canary'  </span><span style="color:#808080;">// cpet with largest name<br></span><span style="color:#cc7832;">assert </span>pets.groupBy <span style="font-weight:bold;">{ </span>it.size() <span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">3</span>: [<span style="color:#6a8759;">'cat'</span>, <span style="color:#6a8759;">'dog'</span>], <span style="color:#6897bb;">4</span>: [<span style="color:#6a8759;">'fish'</span>], <span style="color:#6897bb;">6</span>: [<span style="color:#6a8759;">'canary'</span>, <span style="color:#6a8759;">'gerbil'</span>]]<br><span style="color:#cc7832;">assert </span>pets.countBy <span style="font-weight:bold;">{ </span>it.size() <span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">3</span>: <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">4</span>: <span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">6</span>: <span style="color:#6897bb;">2</span>]<br><span style="color:#cc7832;">assert </span>pets.sum<span style="font-weight:bold;">{ </span>it.size() <span style="font-weight:bold;">} </span>== <span style="color:#6897bb;">22  </span><span style="color:#808080;">// total size of all pet names<br></span><span style="color:#cc7832;">assert </span>pets.average<span style="font-weight:bold;">{ </span>it.size() <span style="font-weight:bold;">} </span>== <span style="color:#6897bb;">4.4  </span><span style="color:#808080;">// average size of pet names<br></span><span style="color:#cc7832;">assert </span>pets.<span style="color:#9876aa;">indices </span>== <span style="color:#6897bb;">0</span>..<span style="color:#6897bb;">4<br></span><span style="color:#cc7832;">assert </span>pets.findIndexValues <span style="font-weight:bold;">{ </span>it.size() == <span style="color:#6897bb;">6 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">4</span>]<br><span style="color:#cc7832;">assert </span>cpets.indexed() == [<span style="color:#6897bb;">0</span>: <span style="color:#6a8759;">'cat'</span>, <span style="color:#6897bb;">1</span>: <span style="color:#6a8759;">'canary'</span>]<br><span style="color:#cc7832;">assert </span>cpets.withIndex()*.toList() == [[<span style="color:#6a8759;">'cat'</span>, <span style="color:#6897bb;">0</span>], [<span style="color:#6a8759;">'canary'</span>, <span style="color:#6897bb;">1</span>]]</pre>

<h3>Modifying mutable lists</h3>

<p>Methods from Java for modifying lists:</p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;">pets.remove(<span style="color:#6897bb;">2</span>);                        <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'cat'</span>, <span style="color:#6a8759;">'canary'</span>, <span style="color:#6a8759;">'fish'</span>, <span style="color:#6a8759;">'gerbil'</span>]  <span style="color:#808080;">// remove by index<br></span>pets.remove(<span style="color:#6a8759;">'fish'</span>);                   <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'cat'</span>, <span style="color:#6a8759;">'canary'</span>, <span style="color:#6a8759;">'gerbil'</span>]  <span style="color:#808080;">// remove by element<br></span>pets.removeIf(p -&gt; p.startsWith(<span style="color:#6a8759;">"c"</span>)); <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'gerbil'</span>]  <span style="color:#808080;">// remove by condition<br></span>pets.clear();                          <span style="color:#cc7832;">assert </span>pets.isEmpty()  <span style="color:#808080;">// make empty<br></span>pets.add(<span style="color:#6a8759;">"kangaroo"</span>);                  <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'kangaroo'</span>]  <span style="color:#808080;">// add element<br></span>pets.add(<span style="color:#6897bb;">0</span>, <span style="color:#6a8759;">"koala"</span>);                  <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'koala'</span>, <span style="color:#6a8759;">'kangaroo'</span>]  <span style="color:#808080;">// add element at index position<br></span>pets.addAll([<span style="color:#6a8759;">'ant'</span>, <span style="color:#6a8759;">'bee'</span>]);           <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'koala'</span>, <span style="color:#6a8759;">'kangaroo'</span>, <span style="color:#6a8759;">'ant'</span>, <span style="color:#6a8759;">'bee'</span>]  <span style="color:#808080;">// add collection<br></span>pets.addAll(<span style="color:#6897bb;">1</span>, [<span style="color:#6a8759;">'ant'</span>]);               <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'koala'</span>, <span style="color:#6a8759;">'ant'</span>, <span style="color:#6a8759;">'kangaroo'</span>, <span style="color:#6a8759;">'ant'</span>, <span style="color:#6a8759;">'bee'</span>]  <span style="color:#808080;">// add collection at index<br></span>pets.removeAll([<span style="color:#6a8759;">'ant'</span>, <span style="color:#6a8759;">'flea'</span>]);       <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'koala'</span>, <span style="color:#6a8759;">'kangaroo'</span>, <span style="color:#6a8759;">'bee'</span>]  <span style="color:#808080;">// remove from collection<br></span>pets.retainAll([<span style="color:#6a8759;">'bee'</span>, <span style="color:#6a8759;">'koala'</span>]);      <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'koala'</span>, <span style="color:#6a8759;">'bee'</span>]  <span style="color:#808080;">// retain from collection<br></span>pets.set(<span style="color:#6897bb;">0</span>, <span style="color:#6a8759;">"zebra"</span>);                  <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'zebra'</span>, <span style="color:#6a8759;">'bee'</span>]  <span style="color:#808080;">// set element at index<br></span>pets.replaceAll(String::toUpperCase);  <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'ZEBRA'</span>, <span style="color:#6a8759;">'BEE'</span>]  <span style="color:#808080;">// replace elements by unary operator<br></span>pets.sort(Comparator.<span style="color:#9876aa;font-style:italic;">naturalOrder</span>());  <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'BEE'</span>, <span style="color:#6a8759;">'ZEBRA'</span>]  <span style="color:#808080;">// sort<br></span></pre><p>Groovy extensions for modifying lists:</p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;">pets &lt;&lt; <span style="color:#6a8759;">'rock'</span>;                        <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'BEE'</span>, <span style="color:#6a8759;">'ZEBRA'</span>, <span style="color:#6a8759;">'rock'</span>]  <span style="color:#808080;">// leftShift append<br></span>pets += [<span style="color:#6a8759;">'rabbit'</span>, <span style="color:#6a8759;">'rock'</span>, <span style="color:#6a8759;">'hare'</span>];    <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'BEE'</span>, <span style="color:#6a8759;">'ZEBRA'</span>, <span style="color:#6a8759;">'rock'</span>, <span style="color:#6a8759;">'rabbit'</span>, <span style="color:#6a8759;">'rock'</span>, <span style="color:#6a8759;">'hare'</span>]  <span style="color:#808080;">// append collection<br></span>pets.unique();                         <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'BEE'</span>, <span style="color:#6a8759;">'ZEBRA'</span>, <span style="color:#6a8759;">'rock'</span>, <span style="color:#6a8759;">'rabbit'</span>, <span style="color:#6a8759;">'hare'</span>]  <span style="color:#808080;">// remove duplicates<br></span>pets.sort<span style="font-weight:bold;">{ </span>it.size() <span style="font-weight:bold;">}</span>;                <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'BEE'</span>, <span style="color:#6a8759;">'rock'</span>, <span style="color:#6a8759;">'hare'</span>, <span style="color:#6a8759;">'ZEBRA'</span>, <span style="color:#6a8759;">'rabbit'</span>]  <span style="color:#808080;">// sort by size<br></span>pets[<span style="color:#6897bb;">0</span>] = <span style="color:#6a8759;">'ant'</span>;                       <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'ant'</span>, <span style="color:#6a8759;">'rock'</span>, <span style="color:#6a8759;">'hare'</span>, <span style="color:#6a8759;">'ZEBRA'</span>, <span style="color:#6a8759;">'rabbit'</span>]  <span style="color:#808080;">// replace element by index<br></span>pets[<span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">3</span>] = [<span style="color:#6a8759;">'snake'</span>, <span style="color:#6a8759;">'SNAKE'</span>];       <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'ant'</span>, <span style="color:#6a8759;">'snake'</span>, <span style="color:#6a8759;">'SNAKE'</span>, <span style="color:#6a8759;">'rabbit'</span>]  <span style="color:#808080;">// replace range of elements<br></span>pets.unique<span style="font-weight:bold;">{</span>it.toLowerCase() <span style="font-weight:bold;">}</span>;        <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'ant'</span>, <span style="color:#6a8759;">'snake'</span>, <span style="color:#6a8759;">'rabbit'</span>]  <span style="color:#808080;">// remove duplicates ignoring case<br></span>pets.reverse(<span style="color:#cc7832;">true</span>);                    <span style="color:#cc7832;">assert </span>pets == [<span style="color:#6a8759;">'rabbit'</span>, <span style="color:#6a8759;">'snake'</span>, <span style="color:#6a8759;">'ant'</span>]  <span style="color:#808080;">// flip<br></span>pets.shuffle();                        <span style="color:#cc7832;">assert </span>pets.size() == <span style="color:#6897bb;">3</span>;  <span style="color:#808080;">// shuffle elements; resulting order will vary<br></span><span style="color:#cc7832;">def </span>dice = [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">5</span>, <span style="color:#6897bb;">6</span>]<br>dice.removeAt(<span style="color:#6897bb;">2</span>);                      <span style="color:#cc7832;">assert </span>dice == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">5</span>, <span style="color:#6897bb;">6</span>]<br>dice.removeElement(<span style="color:#6897bb;">2</span>);                 <span style="color:#cc7832;">assert </span>dice == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">5</span>, <span style="color:#6897bb;">6</span>]<br>dice.removeLast();                     <span style="color:#cc7832;">assert </span>dice == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">5</span>]<br>dice.swap(<span style="color:#6897bb;">0</span>, <span style="color:#6897bb;">2</span>);                       <span style="color:#cc7832;">assert </span>dice == [<span style="color:#6897bb;">5</span>, <span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">1</span>]</pre>

<h3>Additional list functionality</h3>

<p>Methods and operators which return new lists or values:</p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;"><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>] + [<span style="color:#6897bb;">1</span>] == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>] - [<span style="color:#6897bb;">1</span>] == [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>] * <span style="color:#6897bb;">2 </span>== [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>]].flatten() == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>].disjoint([<span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">5</span>, <span style="color:#6897bb;">6</span>])<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>].intersect([<span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>]) == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">3</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>].collect <span style="font-weight:bold;">{ </span>it + <span style="color:#6897bb;">3 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">5</span>, <span style="color:#6897bb;">6</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].collect <span style="font-weight:bold;">{ </span><span style="color:#6897bb;">1 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">1</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">3</span>].findAll <span style="font-weight:bold;">{ </span>it % <span style="color:#6897bb;">2 </span>== <span style="color:#6897bb;">0 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">2</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].take(<span style="color:#6897bb;">3</span>) == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].takeRight(<span style="color:#6897bb;">3</span>) == [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].takeWhile<span style="font-weight:bold;">{ </span>it &lt; <span style="color:#6897bb;">3 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].drop(<span style="color:#6897bb;">2</span>) == [<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].dropRight(<span style="color:#6897bb;">2</span>) == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].dropWhile<span style="font-weight:bold;">{</span>it &lt; <span style="color:#6897bb;">3 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].join(<span style="color:#6a8759;">'-'</span>) == <span style="color:#6a8759;">'1-2-3-4'<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].tail() == [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].init() == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].tails() == [[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>], [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>], [<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>], [<span style="color:#6897bb;">4</span>], []]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].inits() == [[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>], [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>], [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>], [<span style="color:#6897bb;">1</span>], []]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].reverse() == [<span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">1</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>].toUnique() == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>].toSorted() == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].collect <span style="font-weight:bold;">{ </span>it * <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">6</span>, <span style="color:#6897bb;">8</span>]<br><span style="color:#cc7832;">assert </span>[[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>], [<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>]].collectNested <span style="font-weight:bold;">{ </span>it * <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">} </span>== [[<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">4</span>], [<span style="color:#6897bb;">6</span>, <span style="color:#6897bb;">8</span>]]<br><span style="color:#cc7832;">def </span>squaresAndCubesOfEvens = <span style="font-weight:bold;">{ </span>it % <span style="color:#6897bb;">2 </span>? [] : [it**<span style="color:#6897bb;">2</span>, it**<span style="color:#6897bb;">3</span>] <span style="font-weight:bold;">}<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].collectMany(squaresAndCubesOfEvens) == [<span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">8</span>, <span style="color:#6897bb;">16</span>, <span style="color:#6897bb;">64</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].any <span style="font-weight:bold;">{ </span>it &gt; <span style="color:#6897bb;">3 </span><span style="font-weight:bold;">}<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].every <span style="font-weight:bold;">{ </span>it &lt; <span style="color:#6897bb;">5 </span><span style="font-weight:bold;">}<br></span><span style="color:#cc7832;">assert </span>![<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].every <span style="font-weight:bold;">{ </span>it &gt; <span style="color:#6897bb;">3 </span><span style="font-weight:bold;">}<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].find <span style="font-weight:bold;">{ </span>it &gt; <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">} </span>== <span style="color:#6897bb;">3<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].findAll <span style="font-weight:bold;">{ </span>it &gt; <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].findIndexOf <span style="font-weight:bold;">{ </span>it &gt; <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">} </span>== <span style="color:#6897bb;">2<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>].findLastIndexOf <span style="font-weight:bold;">{ </span>it &gt; <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">} </span>== <span style="color:#6897bb;">2<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].inject <span style="font-weight:bold;">{ </span>acc, i <span style="font-weight:bold;">-&gt; </span>acc + i <span style="font-weight:bold;">} </span>== <span style="color:#6897bb;">10<br></span><span style="color:#cc7832;">assert </span>(<span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">10</span>).collate(<span style="color:#6897bb;">3</span>)  == [[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>], [<span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">5</span>, <span style="color:#6897bb;">6</span>], [<span style="color:#6897bb;">7</span>, <span style="color:#6897bb;">8</span>, <span style="color:#6897bb;">9</span>], [<span style="color:#6897bb;">10</span>]]<br><span style="color:#cc7832;">assert </span>(<span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">10</span>).chop(<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">2</span>, -<span style="color:#6897bb;">1</span>)  == [[<span style="color:#6897bb;">1</span>], [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>], [<span style="color:#6897bb;">5</span>, <span style="color:#6897bb;">6</span>], [<span style="color:#6897bb;">7</span>, <span style="color:#6897bb;">8</span>, <span style="color:#6897bb;">9</span>, <span style="color:#6897bb;">10</span>]]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>,<span style="color:#6897bb;">2</span>,<span style="color:#6897bb;">3</span>].permutations().toList() == [<br>        [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>], [<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">1</span>], [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">3</span>], [<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>], [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">2</span>], [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">1</span>]<br>]<br><span style="color:#cc7832;">def </span>matrix = [[<span style="color:#6a8759;">'a'</span>, <span style="color:#6a8759;">'b'</span>], [ <span style="color:#6897bb;">1 </span>,  <span style="color:#6897bb;">2 </span>]]<br><span style="color:#cc7832;">assert </span>matrix.transpose()    == [ [<span style="color:#6a8759;">'a'</span>, <span style="color:#6897bb;">1</span>], [<span style="color:#6a8759;">'b'</span>, <span style="color:#6897bb;">2</span>] ]<br><span style="color:#cc7832;">assert </span>matrix.combinations() == [ [<span style="color:#6a8759;">'a'</span>, <span style="color:#6897bb;">1</span>], [<span style="color:#6a8759;">'b'</span>, <span style="color:#6897bb;">1</span>], [<span style="color:#6a8759;">'a'</span>, <span style="color:#6897bb;">2</span>], [<span style="color:#6a8759;">'b'</span>, <span style="color:#6897bb;">2</span>] ]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>].subsequences()*.toList() == [[<span style="color:#6897bb;">1</span>], [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>], [<span style="color:#6897bb;">2</span>], [<span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>], [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>], [<span style="color:#6897bb;">3</span>], [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">3</span>]]<br><span style="color:#cc7832;">def </span>answers = [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>].withDefault<span style="font-weight:bold;">{ </span><span style="color:#6897bb;">42 </span><span style="font-weight:bold;">}<br></span><span style="color:#cc7832;">assert </span>answers[<span style="color:#6897bb;">2</span>] == <span style="color:#6897bb;">3 </span>&amp;&amp; answers[<span style="color:#6897bb;">99</span>] == <span style="color:#6897bb;">42</span></pre>

<h3>GINQ processing</h3><p>Groovy also supports language integrated query support to process lists:</p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;"><span style="color:#808080;">// squares of odd numbers between 1 and 5<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">9</span>, <span style="color:#6897bb;">25</span>] == <span style="color:#9876aa;font-style:italic;">GQL </span>{<br>    <span style="color:#cc7832;">from </span>n <span style="color:#cc7832;">in </span><span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">5 </span><span style="color:#cc7832;">where </span>n % <span style="color:#6897bb;">2 </span>!= <span style="color:#6897bb;">0 </span><span style="color:#cc7832;">select </span>n ** <span style="color:#6897bb;">2<br></span>}<br><br><span style="color:#808080;">// group pets by name size<br></span><span style="color:#cc7832;">assert </span>[<span style="color:#6a8759;">"3:[cat, dog]"</span>, <span style="color:#6a8759;">"4:[fish]"</span>, <span style="color:#6a8759;">"6:[canary, gerbil]"</span>] == <span style="color:#9876aa;font-style:italic;">GQL </span>{<br>    <span style="color:#cc7832;">from </span>p <span style="color:#cc7832;">in </span>pets<br>    <span style="color:#cc7832;">groupby </span>p.size() <span style="color:#cc7832;">as </span>size<br>    <span style="color:#cc7832;">select </span>size, agg(p) <span style="color:#cc7832;">as </span>names<br>}*.with<span style="font-weight:bold;">{ </span><span style="color:#6a8759;">"</span>$it.size<span style="color:#6a8759;">:</span>$it.<span style="color:#9876aa;">names</span><span style="color:#6a8759;">" </span><span style="font-weight:bold;">}</span></pre><h3>Stream methods</h3>

<p>Useful stream methods (it is worthwhile comparing some of the examples to earlier non-stream variants):</p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;">pets = [<span style="color:#6a8759;">'cat'</span>, <span style="color:#6a8759;">'canary'</span>, <span style="color:#6a8759;">'dog'</span>, <span style="color:#6a8759;">'fish'</span>, <span style="color:#6a8759;">'gerbil'</span>]<br><span style="color:#cc7832;">assert </span>pets.stream().filter(p -&gt; p.size() == <span style="color:#6897bb;">3</span>).map(String::toUpperCase).toList() == [<span style="color:#6a8759;">'CAT'</span>, <span style="color:#6a8759;">'DOG'</span>]<br><span style="color:#cc7832;">assert </span>pets.stream().map(p -&gt; p.size()).distinct().sorted().toList() == [<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">6</span>]  <span style="color:#808080;">// ordered pet name sizes<br></span><span style="color:#cc7832;">assert </span>nums.stream().reduce<span style="font-weight:bold;">{ </span>a, b <span style="font-weight:bold;">-&gt; </span>a + b <span style="font-weight:bold;">}</span>.get() == <span style="color:#6897bb;">10<br></span><span style="color:#cc7832;">assert </span>(<span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">10</span>).stream().skip(<span style="color:#6897bb;">3</span>).limit(<span style="color:#6897bb;">5</span>).filter(i -&gt; i % <span style="color:#6897bb;">2 </span>== <span style="color:#6897bb;">0</span>).map(i -&gt; i ** <span style="color:#6897bb;">2</span>).toList() == [<span style="color:#6897bb;">16</span>, <span style="color:#6897bb;">36</span>, <span style="color:#6897bb;">64</span>]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].stream().flatMap(i -&gt; i % <span style="color:#6897bb;">2 </span>? Stream.<span style="color:#9876aa;font-style:italic;">empty</span>() : Stream.<span style="color:#9876aa;font-style:italic;">of</span>(i**<span style="color:#6897bb;">2</span>, i**<span style="color:#6897bb;">3</span>)).toList() == [<span style="color:#6897bb;">4</span>, <span style="color:#6897bb;">8</span>, <span style="color:#6897bb;">16</span>, <span style="color:#6897bb;">64</span>]<br><span style="color:#cc7832;">assert </span>pets.stream().collect(Collectors.<span style="color:#9876aa;font-style:italic;">groupingBy</span>(p -&gt; p.size())) == [<span style="color:#6897bb;">3</span>:[<span style="color:#6a8759;">'cat'</span>, <span style="color:#6a8759;">'dog'</span>], <span style="color:#6897bb;">4</span>:[<span style="color:#6a8759;">'fish'</span>], <span style="color:#6897bb;">6</span>:[<span style="color:#6a8759;">'canary'</span>, <span style="color:#6a8759;">'gerbil'</span>]]<br><span style="color:#cc7832;">assert </span>[<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">4</span>].stream().map(Integer::toString).collect(Collectors.<span style="color:#9876aa;font-style:italic;">joining</span>(<span style="color:#6a8759;">'-'</span>)) == <span style="color:#6a8759;">'1-2-3-4'<br></span>Arrays.<span style="color:#9876aa;font-style:italic;">stream</span>(<span style="color:#6897bb;">0</span>..<span style="color:#6897bb;">9 </span><span style="color:#cc7832;">as int</span>[]).summaryStatistics().with <span style="font-weight:bold;">{<br></span><span style="font-weight:bold;">    </span><span style="color:#cc7832;">assert </span><span style="color:#9876aa;">sum </span>== <span style="color:#6897bb;">45 </span>&amp;&amp; <span style="color:#9876aa;">min </span>== <span style="color:#6897bb;">0 </span>&amp;&amp; <span style="color:#9876aa;">max </span>== <span style="color:#6897bb;">9 </span>&amp;&amp; <span style="color:#9876aa;">average </span>== <span style="color:#6897bb;">4.5 </span>&amp;&amp; <span style="color:#9876aa;">count </span>== <span style="color:#6897bb;">10<br></span><span style="font-weight:bold;">}<br></span><span style="color:#cc7832;">assert </span>pets.stream().allMatch(w -&gt; w ==~ <span style="color:#6a8759;">/</span><span style="color:#6a8759;background-color:#364135;">.*[aeiou].*</span><span style="color:#6a8759;">/</span>)  <span style="color:#808080;">// all pet names contain a vowel</span></pre>

<h3>GPars</h3>

<p>Before looking at <a href="http://gpars.org/" target="_blank">GPars</a>, it is worth looking at parallel stream processing:</p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;"><span style="color:#808080;">// calculate squares of odd numbers from input list<br></span><span style="color:#cc7832;">assert </span>(<span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">5</span>).parallelStream().filter<span style="font-weight:bold;">{ </span>it % <span style="color:#6897bb;">2 </span>!= <span style="color:#6897bb;">0 </span><span style="font-weight:bold;">}</span>.map(n -&gt; n ** <span style="color:#6897bb;">2</span>).toList() == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">9</span>, <span style="color:#6897bb;">25</span>]</pre><p>GPars was designed to provide similar functionality long before streams processing was available. It still has some useful features.</p><p>Groovy has several tricks for removing the outer "withPool" clauses but we'll do the longhand here. Two GPars variations of above streams example:</p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;">GParsPool.<span style="color:#9876aa;font-style:italic;">withPool </span><span style="font-weight:bold;">{<br></span><span style="font-weight:bold;">    </span><span style="color:#cc7832;">assert </span>(<span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">5</span>).findAllParallel<span style="font-weight:bold;">{ </span>it % <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">}</span>.collectParallel<span style="font-weight:bold;">{ </span>it ** <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">9</span>, <span style="color:#6897bb;">25</span>]<br>    <span style="color:#cc7832;">assert </span>(<span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">5</span>).parallel.filter<span style="font-weight:bold;">{ </span>it % <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">}</span>.map<span style="font-weight:bold;">{ </span>it ** <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">}</span>.collection == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">9</span>, <span style="color:#6897bb;">25</span>]<br><span style="font-weight:bold;">}<br></span></pre><p>Or using (<a href="https://openjdk.java.net/jeps/425" target="_blank">JEP 425</a>) virtual threads:</p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;">GParsExecutorsPool.<span style="color:#9876aa;font-style:italic;">withExistingPool</span>(Executors.newVirtualThreadPerTaskExecutor()) <span style="font-weight:bold;">{<br></span><span style="font-weight:bold;">    </span><span style="color:#cc7832;">assert </span>(<span style="color:#6897bb;">1</span>..<span style="color:#6897bb;">5</span>).findAllParallel<span style="font-weight:bold;">{ </span>it % <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">}</span>.collectParallel<span style="font-weight:bold;">{ </span>it ** <span style="color:#6897bb;">2 </span><span style="font-weight:bold;">} </span>== [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">9</span>, <span style="color:#6897bb;">25</span>]<br><span style="font-weight:bold;">}<br></span></pre>

<h3>Other libraries</h3>
<p>There are numerous list-related libraries on the JVM. We'll look at just a few.</p>

<h4>Eclipse collections</h4>
<p><a href="https://www.eclipse.org/collections/" target="_blank">Eclipse collections</a> comes with many container types including immutable collections, primitive collections, bimaps, multimaps and bags as well as numerous utility methods. It focuses on reduced memory footprint and efficient containers. It might be particularly of interest if you need primitive collections, immutable collections or some more exotic collection types like bag or bidirectional maps. Here are just a few examples:</p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;"><span style="color:#cc7832;">var </span>certainties = Lists.<span style="color:#9876aa;font-style:italic;">immutable</span>.of(<span style="color:#6a8759;">'death'</span>, <span style="color:#6a8759;">'taxes'</span>)<br><span style="color:#cc7832;">assert </span>certainties.reduce<span style="font-weight:bold;">{ </span>a, b <span style="font-weight:bold;">-&gt; </span><span style="color:#6a8759;">"</span>$a<span style="color:#6a8759;"> &amp; </span>$b<span style="color:#6a8759;">" </span><span style="font-weight:bold;">}</span>.get() == <span style="color:#6a8759;">'death &amp; taxes'<br></span><span style="color:#cc7832;">var </span>numBag = Bags.<span style="color:#9876aa;font-style:italic;">immutable</span>.with(<span style="color:#6a8759;">'One'</span>, <span style="color:#6a8759;">'One'</span>, <span style="color:#6a8759;">'Two'</span>, <span style="color:#6a8759;">'Three'</span>)<br><span style="color:#cc7832;">assert </span>numBag.toMapOfItemToCount() == [<span style="color:#6a8759;">One</span>:<span style="color:#6897bb;">2</span>, <span style="color:#6a8759;">Two</span>:<span style="color:#6897bb;">1</span>, <span style="color:#6a8759;">Three</span>:<span style="color:#6897bb;">1</span>]<br><span style="color:#cc7832;">var </span>biMap = BiMaps.<span style="color:#9876aa;font-style:italic;">immutable</span>.with(<span style="color:#6897bb;">6</span>, <span style="color:#6a8759;">"six"</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6a8759;">"two"</span>)<br><span style="color:#cc7832;">assert </span>biMap.inverse().six == <span style="color:#6897bb;">6</span></pre>

<h4>Guava</h4>

<p><a href="https://github.com/google/guava/wiki" target="_blank">Guava</a> provides a number of extensions to the JDK collections ecosystem. In particular, it has immutable collections, new collection types like multisets and bidirectional maps and various powerful extensions and utilities. Here are a few examples:</p>

<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;"><span style="color:#cc7832;">var </span>set = TreeMultiset.<span style="color:#9876aa;font-style:italic;">create</span>([<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>])<br><span style="color:#cc7832;">assert </span>set == TreeMultiset.<span style="color:#9876aa;font-style:italic;">create</span>([<span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">1</span>])<br>set.addAll([<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">5</span>])<br><span style="color:#cc7832;">assert </span>set.size() == <span style="color:#6897bb;">6 </span>&amp;&amp; set.elementSet().size() == <span style="color:#6897bb;">4<br></span><span style="color:#cc7832;">assert </span>set.toList() == [<span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">1</span>, <span style="color:#6897bb;">2</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">3</span>, <span style="color:#6897bb;">5</span>]<br><span style="color:#cc7832;">var </span>bimap = HashBiMap.<span style="color:#9876aa;font-style:italic;">create</span>()<br>bimap.<span style="color:#6a8759;">five </span>= <span style="color:#6897bb;">5<br></span><span style="color:#cc7832;">assert </span>bimap.inverse()[<span style="color:#6897bb;">5</span>] == <span style="color:#6a8759;">'five'</span></pre>

<h4>Apache Commons Collections</h4>
<p>The <a href="https://commons.apache.org/proper/commons-collections/" target="_blank">Apache Commons Collections</a> library extends upon the JDK collections framework adding some new types like bidirectional maps and bags as well as providing many comparator and iterator implementations. The library was designed to fill gaps in the JDK offerings and while some of those gaps in the JDK have now been filled by the JDK itself, Commons Collections still contains much useful functionality. Here are a few examples:</p>

<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.6pt;"><span style="color:#cc7832;">var </span>six = <span style="color:#e8bf6a;font-weight:bold;">[</span><span style="color:#6a8759;">six</span>: <span style="color:#6897bb;">6</span><span style="color:#e8bf6a;font-weight:bold;">] </span><span style="color:#cc7832;">as </span>TreeBidiMap<br><span style="color:#cc7832;">assert </span>six.inverseBidiMap() == [<span style="color:#6897bb;">6</span>: <span style="color:#6a8759;">'six'</span>]<br><span style="color:#cc7832;">var </span>bag = <span style="color:#cc7832;">new </span>HashBag([<span style="color:#6a8759;">'one'</span>] * <span style="color:#6897bb;">6</span>)<br>bag.remove(<span style="color:#6a8759;">'one'</span>, <span style="color:#6897bb;">2</span>)<br><span style="color:#cc7832;">assert </span>bag.getCount(<span style="color:#6a8759;">'one'</span>) == <span style="color:#6897bb;">4</span></pre>

<h3>Further Information</h3>

<ul><li>GPars (<a href="http://gpars.org/" target="_blank">website</a>)</li><li>Eclipse Collections (<a href="https://www.eclipse.org/collections/" target="_blank">website</a> and <a href="https://github.com/eclipse/eclipse-collections" target="_blank">github site</a>)</li><li>Guava (<a href="https://github.com/google/guava/wiki" target="_blank">user guide</a>)</li><li>Apache Commons Collections (<a href="https://commons.apache.org/proper/commons-collections/" target="_blank">website</a>)</li><li><a href="https://www.manning.com/books/groovy-in-action-second-edition" target="_blank">Groovy in Action</a> (Appendix D has cheat sheets for Lists, GStrings, Closures, Regular expressions and GPath expressions)</li><li><a href="https://blog.mrhaki.com/2009/10/groovy-goodness-getting-tail-of-list.html" target="_blank">Groovy Goodness: Getting the Tail of a List</a></li><li><a href="https://blog.mrhaki.com/2011/09/groovy-goodness-take-and-drop-items.html" target="_blank">Groovy Goodness: Take and Drop Items from a List</a></li><li><a href="https://blog.mrhaki.com/2015/01/groovy-goodness-take-or-drop-last-items.html" target="_blank">Groovy Goodness: Take Or Drop Last Items From a Collection</a></li><li><a href="https://blog.mrhaki.com/2020/03/groovy-goodness-safe-index-based-access.html" target="_blank">Groovy Goodness: Safe Index Based Access For Lists, Arrays and Maps</a></li><li><a href="https://blog.mrhaki.com/2015/01/groovy-goodness-pop-and-push-items-in.html" target="_blank">Groovy Goodness: Pop And Push Items In a List</a><br></li><li><a href="https://www.baeldung.com/groovy-lists" target="_blank">Lists in Groovy</a><br></li></ul>

<h3>Conclusion</h3>

<p>We have looked at the more common methods for list processing with Groovy and a few other useful libraries.</p><p><br></p>
